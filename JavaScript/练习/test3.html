<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<script type="text/javascript">
		window.onload = () => {
			let btn = document.getElementById("btn");
			/*定义一个函数，用来为指定元素绑定响应函数
			
				 addEventListener()中的this，是绑定事件对象
				 attachEvent()中的this，是window
				 需要一个方法统一this
	 
				 参数：
					 obj 要绑定的对象
					 eventStr 事件的字符串
					 callback 回调函数
			*/
			const bind = (obj, eventStr, callback) => {
				 if(obj.addEventListener){
					 obj.addEventListener(eventStr,callback,false);
				 }
				 else{
					 /* 
						 function(){
							 callback.call(obj);
						 }
						 为了使this统一，直接调用callback在IE8中是浏览器调用的
						 我们改不了，加上一个匿名函数的话，在IE8中则会是浏览器调用
						 匿名函数。
					 */
					 eventStr = "on".join(eventStr);
					 obj.attachEvent(eventStr,function(){
						 callback.call(obj);
					 });
				}
			}
				 
			bind(btn,"click",function(){
				 console.log(1);
				 console.log(this);
			})
			bind(btn,"click",function(){
				 console.log(2);
				 console.log(this);
			})
		}
		</script>
	</head>
	<body>
		<button id="btn" type="button">click</button>
	</body>
</html>
